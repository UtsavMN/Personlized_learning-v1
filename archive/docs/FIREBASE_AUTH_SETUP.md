# Firebase Authentication Setup

Your app requires Google Sign-In authentication. Follow these exact steps:

## Step 1: Enable Google Sign-In Provider

1. Go to Firebase Console: https://console.firebase.google.com/project/personlized-learning-c97ce/overview
2. In the left sidebar, click **Authentication**
3. Click the **Providers** tab (or **Get Started** if first time)
4. Find **Google** in the list and click it
5. Toggle the switch to **Enable** (it will turn blue)
6. Under "Web SDK configuration", you'll see:
   - **Web client ID** (read-only, auto-generated)
   - **Web client secret** (read-only, auto-generated)
   - ⚠️ **DO NOT** edit these fields—they're auto-generated by Firebase
7. Set **Project support email** (use any Gmail account or your account)
8. Click **Save**

**The "Web client ID" and "Web client secret" fields are automatically set by Firebase—you don't need to do anything with them.**

## Step 2: Add Authorized Domains

⚠️ **THIS IS THE CRITICAL STEP** - This is where you add `localhost:9002`

1. In **Authentication**, click the **Settings** tab (gear icon)
2. Scroll down to **Authorized domains**
3. Click **Add domain**
4. Enter `localhost:9002` (exactly as written, no `http://` prefix)
5. Press Enter or click outside the field
6. Verify it appears in the authorized domains list
7. Scroll down and click **Save**

The list should now include:
```
localhost:9002
localhost:3000 (optional, if using npm start)
personlized-learning-c97ce.web.app (production)
```

## Step 3: Configure Google Cloud OAuth Consent Screen

1. Open Google Cloud Console: https://console.cloud.google.com/
2. Make sure project `personlized-learning-c97ce` is selected (top left dropdown)
3. In the left sidebar, go to **APIs & Services** → **OAuth consent screen**
4. If prompted, select **External** as the User Type, then click **Create**
5. Fill in the form:
   - **App name**: "NIE Campus Guide" or your app name
   - **User support email**: Your email address
   - **Developer contact information**: Your email address
6. Click **Save and Continue**
7. Skip scopes (or add what you need), click **Save and Continue**
8. Review and click **Back to Dashboard**

## Step 4: Restart and Test

1. Stop the dev server (Ctrl+C)
2. Restart it:
```powershell
npm run dev
```

3. Go to http://localhost:9002
4. Click **"Login with Google"** button
5. You should see a Google login popup
6. Log in with your Google account
7. ✅ You should be logged in and see the Documents tab

## Troubleshooting

| Error | Solution |
|-------|----------|
| **"configuration-not-found"** | Make sure Google provider is **Enabled** (blue toggle). Wait 5-10 minutes and refresh. |
| **"Redirect URI mismatch"** | Add `localhost:9002` to **Authorized domains** in Authentication → Settings. Use lowercase. |
| **"Popup blocked"** | Allow popups for localhost:9002 in your browser. |
| **"CONFIGURATION_NOT_FOUND: 400"** | Ensure the OAuth consent screen is created and published (even for external testing). |
| **Still not working?** | Clear browser cache (Ctrl+Shift+Delete), hard refresh (Ctrl+Shift+R), wait 10 minutes, try again. |

## Quick Checklist

- [ ] Google provider is **Enabled** in Firebase Authentication
- [ ] `localhost:9002` is in **Authorized domains** 
- [ ] OAuth consent screen is created in Google Cloud Console
- [ ] Dev server restarted after making changes
- [ ] Browser cache cleared
- [ ] Using `localhost:9002`, not `127.0.0.1`

---

For more help: https://firebase.google.com/docs/auth/web/google-signin

